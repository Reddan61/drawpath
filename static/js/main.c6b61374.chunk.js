(this.webpackJsonpdrawgraph=this.webpackJsonpdrawgraph||[]).push([[0],{15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var a=n(2),c=n.n(a),r=n(9),o=n.n(r),i=(n(15),n(8)),u=n(5),l=n(10),d=n(0),s=n(3),p=n.n(s),f=n(1),b={dots:[],graph:{},context:null,mode:null,clickedDot:null,startDot:null,finishDot:null,isCalculated:!1},h=function(t,e){switch(e.type){case"clear":return Object(d.a)(Object(d.a)({},b),{},{context:t.context});case"changeMode":return Object(d.a)(Object(d.a)({},t),{},{mode:e.payload.mode===t.mode?null:e.payload.mode});case"setContext":return Object(d.a)(Object(d.a)({},t),{},{context:e.payload.context});case"addDots":return Object(d.a)(Object(d.a)({},t),{},{dots:[].concat(Object(l.a)(t.dots),[e.payload.dot])});case"startDot":return Object(d.a)(Object(d.a)({},t),{},{startDot:e.payload.dot});case"finishDot":return Object(d.a)(Object(d.a)({},t),{},{finishDot:e.payload.dot});case"clickDot":if(null===e.payload.position){var n=t.dots.findIndex((function(e){return e[0]===t.clickedDot[0]&&e[1]===t.clickedDot[1]})),a=t.dots.findIndex((function(t){return t[0]===e.payload.second[0]&&t[1]===e.payload.second[1]})),c=t.clickedDot[0]-e.payload.second[0],r=t.clickedDot[1]-e.payload.second[1],o=Math.sqrt(Math.pow(c,2)+Math.pow(r,2)),i=Object(d.a)({},t.graph);return i[n]=Object(d.a)(Object(d.a)({},t.graph[n]),{},Object(u.a)({},a,o)),i[a]=Object(d.a)(Object(d.a)({},t.graph[a]),{},Object(u.a)({},n,o)),Object(d.a)(Object(d.a)({},t),{},{clickedDot:e.payload.position,graph:i})}return Object(d.a)(Object(d.a)({},t),{},{clickedDot:e.payload.position});case"setCalculate":return Object(d.a)(Object(d.a)({},t),{},{isCalculated:e.payload.bool});default:return t}};var j=function(){var t=Object(a.useReducer)(h,b),e=Object(i.a)(t,2),n=e[0],c=e[1],r=Object(a.useRef)(null),o=Object(a.useRef)(null),u=Object(a.useRef)(null);function l(t){c({type:"changeMode",payload:{mode:t}})}u.current=n,o.current=n.context;var d=Object(a.useCallback)((function(t){var e=o.current,n=[t.offsetX,t.offsetY];if(u.current.isCalculated&&v(),1===u.current.mode)return O(n)?void alert("Place is taken"):(s([n],"black"),void c({type:"addDots",payload:{dot:[].concat(n)}}));if(2===u.current.mode){var a=O(n);return a?void(!u.current.clickedDot&&a?c({type:"clickDot",payload:{position:a}}):a&&(e.beginPath(),e.strokeStyle="black",e.lineWidth=5,e.moveTo(u.current.clickedDot[0],u.current.clickedDot[1]),e.lineTo(a[0],a[1]),e.stroke(),e.closePath(),c({type:"clickDot",payload:{position:null,second:a}}))):void alert("Click on the dots")}if(3===u.current.mode){var r=u.current.startDot,l=u.current.finishDot;if(null===r){var d=j(n);return void("number"===typeof d&&c({type:"startDot",payload:{dot:d}}))}if(null===l){var p=j(n);"number"===typeof p&&c({type:"finishDot",payload:{dot:p}}),l=p}var f=function(t,e,n){var a={},c=[String(e)],r={},o={},i=!1;Object.keys(t).forEach((function(n){var c=t[e][n];a[n]=c||1/0}));var u=y(a,c),l=function(){var l=a[u];if(o=t[u],Object.keys(o).forEach((function(t){var n=l+o[t];n<a[t]&&(t===String(e)?r[u]=t:(a[t]=n,r[t]=u))})),u===String(n))return i=!0,"break";c.push(u),u=y(a,c)};for(;u;){if("break"===l())break}return[a,r,i]}(u.current.graph,r,l),b=Object(i.a)(f,3),h=(b[0],b[1]),_=b[2];if(c({type:"setCalculate",payload:{bool:!0}}),!_)return void alert("Path not found");var k=function(t,e,n){var a=String(n),c=[];for(;String(a)!==String(e);)c.unshift(Number(a)),a=Number(t[a]);return c.unshift(Number(e)),c}(h,r,l);e.beginPath(),e.strokeStyle="red",e.lineWidth=5,e.moveTo(u.current.dots[k[0]][0],u.current.dots[k[0]][1]);for(var g=1;g<k.length;g++)e.lineTo(u.current.dots[k[g]][0],u.current.dots[k[g]][1]),e.stroke();e.closePath(),s([[u.current.dots[k[0]][0],u.current.dots[k[0]][1]]],"red");for(var m=1;m<k.length;m++)s([[u.current.dots[k[m]][0],u.current.dots[k[m]][1]]],"red")}}),[]);function s(t,e){var n=o.current;t.forEach((function(t){n.beginPath(),n.fillStyle=e,n.arc(t[0],t[1],25,0,2*Math.PI),n.fill(),n.closePath()}))}function j(t){return u.current.dots.findIndex((function(e){var n=t[0]-e[0],a=t[1]-e[1];return Math.sqrt(Math.pow(n,2)+Math.pow(a,2))<=50}))}function O(t){return u.current.dots.filter((function(e){var n=Math.pow(t[0]-e[0],2),a=Math.pow(t[1]-e[1],2);return Math.sqrt(n+a)<=25}))[0]}function v(){o.current.clearRect(0,0,r.current.width,r.current.height),c({type:"clear"})}function y(t,e){var n,a=1/0;return Object.keys(t).forEach((function(c){var r=t[c];r<a&&!e.includes(c)&&(a=r,n=c)})),n}return Object(a.useEffect)((function(){r.current.width=1800,r.current.height=850,r.current.style.width="1800px",r.current.style.height="850px";var t=r.current.getContext("2d");c({type:"setContext",payload:{context:t}}),r.current.addEventListener("click",(function(t){return d(t)}))}),[]),Object(f.jsxs)("div",{className:p.a.app,children:[Object(f.jsxs)("header",{className:p.a.app__header,children:[Object(f.jsx)("button",{onClick:v,children:"Clear"}),Object(f.jsx)("button",{className:"".concat(1===n.mode&&p.a.app__button_active," "),onClick:function(){return l(1)},children:"Dots"}),Object(f.jsx)("button",{className:"".concat(2===n.mode&&p.a.app__button_active," "),onClick:function(){alert("Connect the dots"),l(2)},children:"Connections"}),Object(f.jsx)("button",{className:"".concat(3===n.mode&&p.a.app__button_active," "),onClick:function(){alert("Choose start and finish"),l(3)},children:"Calculate"})]}),Object(f.jsx)("main",{className:p.a.app__main,children:Object(f.jsx)("canvas",{ref:r})})]})},O=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(j,{})}),document.getElementById("root")),O()},3:function(t,e,n){t.exports={app:"App_app__3WI_l",app__header:"App_app__header__3vS3-",app__button_active:"App_app__button_active__1gPBl",app__main:"App_app__main__MBrnY"}}},[[17,1,2]]]);
//# sourceMappingURL=main.c6b61374.chunk.js.map