(this.webpackJsonpdrawgraph=this.webpackJsonpdrawgraph||[]).push([[0],{17:function(t,e,n){},20:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),c=n(12),o=n.n(c),i=(n(17),n(6)),u=n.n(i),s=n(8),l=n(10),d=n(11),p=n(3),h=n.n(p);function f(t,e){var n,r=1/0;return Object.keys(t).forEach((function(a){var c=t[a];c<r&&!e.includes(a)&&(r=c,n=a)})),n}var b=n(5),j=n(0),y={dots:[],graph:{},context:null,mode:null,clickedDot:null,startDot:null,finishDot:null},O=function(t,e){switch(e.type){case"clear":return Object(j.a)(Object(j.a)({},y),{},{context:t.context});case"changeMode":return Object(j.a)(Object(j.a)({},t),{},{mode:e.payload.mode===t.mode?null:e.payload.mode});case"setContext":return Object(j.a)(Object(j.a)({},t),{},{context:e.payload.context});case"addDots":return Object(j.a)(Object(j.a)({},t),{},{dots:[].concat(Object(s.a)(t.dots),[e.payload.dot])});case"startDot":return Object(j.a)(Object(j.a)({},t),{},{startDot:e.payload.dot});case"finishDot":return Object(j.a)(Object(j.a)({},t),{},{finishDot:e.payload.dot});case"clickDot":if(null===e.payload.position){var n=t.dots.findIndex((function(e){return e[0]===t.clickedDot[0]&&e[1]===t.clickedDot[1]})),r=t.dots.findIndex((function(t){return t[0]===e.payload.second[0]&&t[1]===e.payload.second[1]})),a=t.clickedDot[0]-e.payload.second[0],c=t.clickedDot[1]-e.payload.second[1],o=Math.sqrt(Math.pow(a,2)+Math.pow(c,2)),i=Object(j.a)({},t.graph);return i[n]=Object(j.a)(Object(j.a)({},t.graph[n]),{},Object(b.a)({},r,o)),i[r]=Object(j.a)(Object(j.a)({},t.graph[r]),{},Object(b.a)({},n,o)),Object(j.a)(Object(j.a)({},t),{},{clickedDot:e.payload.position,graph:i})}return Object(j.a)(Object(j.a)({},t),{},{clickedDot:e.payload.position});case"dropCalculatedPath":return Object(j.a)(Object(j.a)({},t),{},{startDot:null,finishDot:null});default:return t}},k=n(1);var v=function(){var t=Object(r.useReducer)(O,y),e=Object(d.a)(t,2),n=e[0],a=e[1],c=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null);function p(t){a({type:"changeMode",payload:{mode:t}})}function b(t){var e=t.target.getBoundingClientRect();return[t.clientX-e.left,t.clientY-e.top]}function j(){return(j=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=b(e),!!!w(n)){t.next=5;break}return alert("Place is taken"),t.abrupt("return");case 5:return t.next=7,a({type:"addDots",payload:{dot:Object(s.a)(n)}});case 7:g();case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){var e=o.current,n=i.current;e.lineWidth=5,e.strokeStyle="green",n.dots.forEach((function(n){t[0]===n[0]&&t[1]===n[1]||(e.beginPath(),e.arc(n[0],n[1],25,0,2*Math.PI),e.stroke(),e.closePath())}))}function g(){var t=o.current,e=i.current;t.clearRect(0,0,c.current.width,c.current.height),m(e.dots,"black"),Object.keys(e.graph).forEach((function(n){Object.keys(e.graph[n]).forEach((function(r){t.beginPath(),t.strokeStyle="black",t.lineWidth=5,t.moveTo(e.dots[n][0],e.dots[n][1]),t.lineTo(e.dots[r][0],e.dots[r][1]),t.stroke(),t.closePath()}))}))}function _(){return(_=Object(l.a)(u.a.mark((function t(e){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.current,r=b(e),c=w(r)){t.next=6;break}return alert("Click on the dots"),t.abrupt("return");case 6:if(i.current.clickedDot||!c){t.next=11;break}a({type:"clickDot",payload:{position:c}}),v(c),t.next=22;break;case 11:if(!c){t.next=22;break}return n.beginPath(),n.strokeStyle="black",n.lineWidth=5,n.moveTo(i.current.clickedDot[0],i.current.clickedDot[1]),n.lineTo(c[0],c[1]),n.stroke(),n.closePath(),t.next=21,a({type:"clickDot",payload:{position:null,second:c}});case 21:g();case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){var e=o.current,n=b(t),r=i.current.startDot,c=i.current.finishDot;if(null!==r){if(null===c){var u=D(n);"number"===typeof u&&a({type:"finishDot",payload:{dot:u}}),c=u}var s=function(t,e,n){var r={},a=[String(e)],c={},o={},i=!1;Object.keys(t).forEach((function(n){var a=t[e][n];r[n]=a||1/0}));for(var u=f(r,a),s=function(){var s=r[u];if(o=t[u],Object.keys(o).forEach((function(t){var n=s+o[t];n<r[t]&&(t===String(e)?c[u]=t:(r[t]=n,c[t]=u))})),u===String(n))return i=!0,"break";a.push(u),u=f(r,a)};u&&"break"!==s(););return[r,c,i]}(i.current.graph,r,c),l=Object(d.a)(s,3),p=(l[0],l[1]);if(l[2]){var h=function(t,e,n){var r=String(n),a=[];for(;String(r)!==String(e);)a.unshift(Number(r)),r=Number(t[r]);return a.unshift(Number(e)),a}(p,r,c);g(),e.beginPath(),e.strokeStyle="red",e.lineWidth=5,e.moveTo(i.current.dots[h[0]][0],i.current.dots[h[0]][1]);for(var j=1;j<h.length;j++)e.lineTo(i.current.dots[h[j]][0],i.current.dots[h[j]][1]),e.stroke();e.closePath(),m([[i.current.dots[h[0]][0],i.current.dots[h[0]][1]]],"red");for(var y=1;y<h.length;y++)m([[i.current.dots[h[y]][0],i.current.dots[h[y]][1]]],"red");a({type:"startDot",payload:{dot:null}}),a({type:"finishDot",payload:{dot:null}})}else alert("Path not found")}else{var O=D(n);"number"===typeof O&&(a({type:"startDot",payload:{dot:O}}),v(i.current.dots[O]))}}function m(t,e){var n=o.current;t.forEach((function(t){n.beginPath(),n.fillStyle=e,n.arc(t[0],t[1],25,0,2*Math.PI),n.fill(),n.closePath()}))}function D(t){return i.current.dots.findIndex((function(e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))<=50}))}function w(t){return i.current.dots.filter((function(e){var n=Math.pow(t[0]-e[0],2),r=Math.pow(t[1]-e[1],2);return Math.sqrt(n+r)<=25}))[0]}return i.current=n,o.current=n.context,Object(r.useEffect)((function(){c.current.width=1800,c.current.height=850,c.current.style.width="1800px",c.current.style.height="850px";var t=c.current.getContext("2d");a({type:"setContext",payload:{context:t}})}),[]),Object(k.jsxs)("div",{className:h.a.app,children:[Object(k.jsxs)("header",{className:h.a.app__header,children:[Object(k.jsx)("button",{onClick:function(){o.current.clearRect(0,0,c.current.width,c.current.height),a({type:"clear"})},children:"Clear"}),Object(k.jsx)("button",{className:"".concat(1===n.mode&&h.a.app__button_active," "),onClick:function(){return p(1)},children:"Dots"}),Object(k.jsx)("button",{className:"".concat(2===n.mode&&h.a.app__button_active," "),onClick:function(){alert("Connect the dots"),p(2)},children:"Connections"}),Object(k.jsx)("button",{className:"".concat(3===n.mode&&h.a.app__button_active," "),onClick:function(t){alert("Choose start and finish"),p(3)},children:"Calculate"})]}),Object(k.jsx)("main",{className:h.a.app__main,children:Object(k.jsx)("canvas",{ref:c,onClick:function(t){switch(i.current.mode){case 1:!function(t){j.apply(this,arguments)}(t);break;case 2:!function(t){_.apply(this,arguments)}(t);break;case 3:x(t)}}})})]})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),c(t),o(t)}))};o.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(v,{})}),document.getElementById("root")),g()},3:function(t,e,n){t.exports={app:"App_app__3WI_l",app__header:"App_app__header__3vS3-",app__button_active:"App_app__button_active__1gPBl",app__main:"App_app__main__MBrnY"}}},[[20,1,2]]]);
//# sourceMappingURL=main.f00b1bfc.chunk.js.map